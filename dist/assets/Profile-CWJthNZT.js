import{b,j as t,B as N}from"./index-DrQlKrd_.js";import{r as l}from"./router-2lA1gtRA.js";import{u as S}from"./driverStore-Mzv2p6I0.js";import"./ui-pwCvv38W.js";import"./map-BW_WLVrL.js";const U=()=>{const{user:r}=b(),{me:a,updateProfile:o}=S(),[n,i]=l.useState((a==null?void 0:a.name)||(r==null?void 0:r.name)||""),[g,h]=l.useState((a==null?void 0:a.licensePlate)||""),[u,f]=l.useState((a==null?void 0:a.vehicleModel)||""),[x,F]=l.useState(null),[y,j]=l.useState(null),[v,A]=l.useState([]),w=l.useRef(null);l.useEffect(()=>{if((r==null?void 0:r.role)==="driver"){const e=localStorage.getItem(`driver_profile_${r.id}`);if(e)try{const s=JSON.parse(e);F(s.profilePhoto||null),j(s.primaryVehicleImage||null),A(s.vehicleImages||[]),i(s.name||n),h(s.licensePlate||""),f(s.vehicleModel||"")}catch{}}},[r==null?void 0:r.id]);const m=e=>{if(!r)return;const s=`driver_profile_${r.id}`;try{const c={...JSON.parse(localStorage.getItem(s)||"{}"),...e};localStorage.setItem(s,JSON.stringify(c))}catch{}};return t.jsx("div",{"trae-inspector-start-line":"45","trae-inspector-start-column":"4","trae-inspector-end-line":"98","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"min-h-screen bg-gray-50 py-8",children:t.jsxs("div",{"trae-inspector-start-line":"46","trae-inspector-start-column":"6","trae-inspector-end-line":"97","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsx("h1",{"trae-inspector-start-line":"47","trae-inspector-start-column":"8","trae-inspector-end-line":"47","trae-inspector-end-column":"75","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Profilim%22%2C%22textStartLine%22%3A%2247%22%2C%22textStartColumn%22%3A%2262%22%2C%22textEndLine%22%3A%2247%22%2C%22textEndColumn%22%3A%2270%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-3xl font-bold text-gray-900 mb-8",children:"Profilim"}),(r==null?void 0:r.role)==="driver"?t.jsxs("div",{"trae-inspector-start-line":"50","trae-inspector-start-column":"10","trae-inspector-end-line":"91","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{"trae-inspector-start-line":"51","trae-inspector-start-column":"12","trae-inspector-end-line":"83","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"bg-white rounded-lg shadow-md p-6 space-y-3",children:[t.jsx("h3",{"trae-inspector-start-line":"52","trae-inspector-start-column":"14","trae-inspector-end-line":"52","trae-inspector-end-column":"79","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22S%C3%BCr%C3%BCc%C3%BC%20Profil%20Y%C3%B6netimi%22%2C%22textStartLine%22%3A%2252%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%2252%22%2C%22textEndColumn%22%3A%2274%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-lg font-semibold",children:"Sürücü Profil Yönetimi"}),t.jsx("input",{"trae-inspector-start-line":"53","trae-inspector-start-column":"14","trae-inspector-end-line":"53","trae-inspector-end-column":"257","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"border rounded px-3 py-2 w-full",placeholder:"Ad (Varsayılan şoför adı)",value:n,onChange:e=>{i(e.target.value),m({name:e.target.value});try{o({name:e.target.value})}catch{}}}),t.jsx("input",{"trae-inspector-start-line":"54","trae-inspector-start-column":"14","trae-inspector-end-line":"54","trae-inspector-end-column":"269","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"border rounded px-3 py-2 w-full",placeholder:"Plaka",value:g,onChange:e=>{h(e.target.value),m({licensePlate:e.target.value});try{o({licensePlate:e.target.value})}catch{}}}),t.jsxs("div",{"trae-inspector-start-line":"55","trae-inspector-start-column":"14","trae-inspector-end-line":"64","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",children:[t.jsx("input",{"trae-inspector-start-line":"56","trae-inspector-start-column":"16","trae-inspector-end-line":"62","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",type:"file",accept:"image/jpeg,image/png",onChange:async e=>{var d;const s=(d=e.target.files)==null?void 0:d[0];if(!s||!/image\/(jpeg|png)/.test(s.type))return;const c=await D(s);if(c.width<200||c.height<200)return;const p=await z(c);F(p),m({profilePhoto:p})}}),x&&t.jsx("img",{"trae-inspector-start-line":"63","trae-inspector-start-column":"34","trae-inspector-end-line":"63","trae-inspector-end-column":"126","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",src:x,alt:"profil",className:"mt-2 w-20 h-20 rounded-full object-cover"})]}),t.jsxs("div",{"trae-inspector-start-line":"65","trae-inspector-start-column":"14","trae-inspector-end-line":"82","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",children:[t.jsx("input",{"trae-inspector-start-line":"66","trae-inspector-start-column":"16","trae-inspector-end-line":"66","trae-inspector-end-column":"277","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"border rounded px-3 py-2 w-full",placeholder:"Araç Modeli",value:u,onChange:e=>{f(e.target.value),m({vehicleModel:e.target.value});try{o({vehicleModel:e.target.value})}catch{}}}),t.jsx("input",{"trae-inspector-start-line":"67","trae-inspector-start-column":"16","trae-inspector-end-line":"76","trae-inspector-end-column":"21","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",ref:w,type:"file",accept:"image/jpeg,image/png",className:"hidden",onChange:async e=>{var B;const s=(B=e.target.files)==null?void 0:B[0];if(!s||!/image\/(jpeg|png)/.test(s.type))return;const c=await D(s);if(c.width<800||c.height<600)return;const p=await z(c),d=await L(c,240,180),C=[...v,{full:p,thumb:d}];A(C),j(p),m({vehicleImages:C,primaryVehicleImage:p})}}),t.jsx(N,{variant:"outline",onClick:()=>{var e;return(e=w.current)==null?void 0:e.click()},children:"Araç Resmi Yükle"}),y&&t.jsx("img",{"trae-inspector-start-line":"78","trae-inspector-start-column":"41","trae-inspector-end-line":"78","trae-inspector-end-column":"139","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",src:y,alt:"Araç",className:"mt-2 w-full max-h-48 object-cover rounded"}),t.jsx("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"16","trae-inspector-end-line":"81","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"grid grid-cols-3 gap-2 mt-2",children:v.map((e,s)=>t.jsx("img",{"trae-inspector-start-line":"80","trae-inspector-start-column":"45","trae-inspector-end-line":"80","trae-inspector-end-column":"131","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",src:e.thumb,alt:"thumb",className:"rounded object-cover w-full h-24"},s))})]})]}),t.jsxs("div",{"trae-inspector-start-line":"85","trae-inspector-start-column":"12","trae-inspector-end-line":"90","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"bg-white rounded-lg shadow-md p-6 space-y-3",children:[t.jsx("h3",{"trae-inspector-start-line":"86","trae-inspector-start-column":"14","trae-inspector-end-line":"86","trae-inspector-end-column":"61","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%C3%96zet%22%2C%22textStartLine%22%3A%2286%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%2286%22%2C%22textEndColumn%22%3A%2256%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-lg font-semibold",children:"Özet"}),t.jsxs("div",{"trae-inspector-start-line":"87","trae-inspector-start-column":"14","trae-inspector-end-line":"87","trae-inspector-end-column":"76","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-sm text-gray-700",children:["Ad: ",n||"-"]}),t.jsxs("div",{"trae-inspector-start-line":"88","trae-inspector-start-column":"14","trae-inspector-end-line":"88","trae-inspector-end-column":"87","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-sm text-gray-700",children:["Plaka: ",g||"-"]}),t.jsxs("div",{"trae-inspector-start-line":"89","trae-inspector-start-column":"14","trae-inspector-end-line":"89","trae-inspector-end-column":"93","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-sm text-gray-700",children:["Araç Modeli: ",u||"-"]})]})]}):t.jsx("div",{"trae-inspector-start-line":"93","trae-inspector-start-column":"10","trae-inspector-end-line":"95","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"bg-white rounded-lg shadow-md p-6",children:t.jsx("div",{"trae-inspector-start-line":"94","trae-inspector-start-column":"12","trae-inspector-end-line":"94","trae-inspector-end-column":"101","trae-inspector-file-path":"src/pages/Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Profil%20bilgileri%20yak%C4%B1nda%20burada%20y%C3%B6netilecek.%22%2C%22textStartLine%22%3A%2294%22%2C%22textStartColumn%22%3A%2251%22%2C%22textEndLine%22%3A%2294%22%2C%22textEndColumn%22%3A%2295%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-gray-700 text-sm",children:"Profil bilgileri yakında burada yönetilecek."})})]})})};async function D(r){const a=URL.createObjectURL(r);return new Promise((o,n)=>{const i=new Image;i.onload=()=>{URL.revokeObjectURL(a),o(i)},i.onerror=n,i.src=a})}async function z(r){const a=document.createElement("canvas");return a.width=r.width,a.height=r.height,a.getContext("2d").drawImage(r,0,0),a.toDataURL("image/jpeg",.85)}async function L(r,a,o){const n=document.createElement("canvas");return n.width=a,n.height=o,n.getContext("2d").drawImage(r,0,0,a,o),n.toDataURL("image/jpeg",.75)}export{U as Profile};
