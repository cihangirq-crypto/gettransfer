import{b as _,j as e,I as C,B as c,A as d,a}from"./index-C4YMzYGH.js";import{r as n,L as x}from"./router-2lA1gtRA.js";import{J as O,e as G,t as I}from"./ui-UHn4To7S.js";import"./map-BW_WLVrL.js";const J=()=>{const{user:l}=_(),[m,g]=n.useState([]),[h,v]=n.useState(!1),[o,D]=n.useState(()=>localStorage.getItem("guestPhone")||""),[p,b]=n.useState(()=>localStorage.getItem("guestReservationCode")||""),[F,N]=n.useState(""),[j,A]=n.useState(null),[i,w]=n.useState(null),[T,E]=n.useState(!1),z=n.useMemo(()=>{const t=Date.now();return m.filter(r=>!r.isImmediate&&new Date(r.pickupTime).getTime()>=t&&r.status!=="cancelled").sort((r,s)=>new Date(r.pickupTime).getTime()-new Date(s.pickupTime).getTime())},[m]),S=n.useMemo(()=>{const t=Date.now();return m.filter(r=>!r.isImmediate&&(new Date(r.pickupTime).getTime()<t||r.status==="cancelled")).sort((r,s)=>new Date(s.pickupTime).getTime()-new Date(r.pickupTime).getTime())},[m]),k=async()=>{if(l){v(!0);try{const t=await fetch(`${d}/bookings/by-customer/${l.id}`),r=await t.json();t.ok&&r.success&&Array.isArray(r.data)?g(r.data):g([])}catch{g([])}finally{v(!1)}}};n.useEffect(()=>{k().catch(()=>{})},[l==null?void 0:l.id]);const L=async t=>{if(confirm("Rezervasyonu iptal etmek istiyor musunuz?"))try{const r=await fetch(`${d}/bookings/${t}/cancel`,{method:"POST"}),s=await r.json();r.ok&&s.success?(a.success("Rezervasyon iptal edildi"),k().catch(()=>{})):a.error("İptal edilemedi")}catch{a.error("İptal edilemedi")}},R=({b:t,canCancel:r})=>{var s;return e.jsx("div",{"trae-inspector-start-line":"70","trae-inspector-start-column":"4","trae-inspector-end-line":"101","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"bg-white rounded-lg shadow-md border border-gray-200 p-4",children:e.jsxs("div",{"trae-inspector-start-line":"71","trae-inspector-start-column":"6","trae-inspector-end-line":"100","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{"trae-inspector-start-line":"72","trae-inspector-start-column":"8","trae-inspector-end-line":"88","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"min-w-0",children:[e.jsx("div",{"trae-inspector-start-line":"73","trae-inspector-start-column":"10","trae-inspector-end-line":"73","trae-inspector-end-column":"104","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-sm font-semibold text-gray-900 truncate",children:t.pickupLocation.address}),e.jsxs("div",{"trae-inspector-start-line":"74","trae-inspector-start-column":"10","trae-inspector-end-line":"74","trae-inspector-end-column":"93","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-sm text-gray-600 truncate",children:["→ ",t.dropoffLocation.address]}),e.jsxs("div",{"trae-inspector-start-line":"75","trae-inspector-start-column":"10","trae-inspector-end-line":"86","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"mt-2 flex flex-wrap gap-2 text-xs text-gray-600",children:[e.jsxs("span",{"trae-inspector-start-line":"76","trae-inspector-start-column":"12","trae-inspector-end-line":"79","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-gray-50 border",children:[e.jsx(O,{className:"h-3.5 w-3.5"}),new Date(t.pickupTime).toLocaleString("tr-TR")]}),e.jsxs("span",{"trae-inspector-start-line":"80","trae-inspector-start-column":"12","trae-inspector-end-line":"83","trae-inspector-end-column":"19","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-gray-50 border",children:[e.jsx(G,{className:"h-3.5 w-3.5"}),t.vehicleType," • ",t.passengerCount," kişi"]}),t.flightNumber&&e.jsxs("span",{"trae-inspector-start-line":"84","trae-inspector-start-column":"31","trae-inspector-end-line":"84","trae-inspector-end-column":"139","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"inline-flex items-center px-2 py-1 rounded bg-gray-50 border",children:["Uçuş: ",t.flightNumber]}),((s=t.returnTrip)==null?void 0:s.enabled)&&e.jsx("span",{"trae-inspector-start-line":"85","trae-inspector-start-column":"38","trae-inspector-end-line":"85","trae-inspector-end-column":"129","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22D%C3%B6n%C3%BC%C5%9F%22%2C%22textStartLine%22%3A%2285%22%2C%22textStartColumn%22%3A%22117%22%2C%22textEndLine%22%3A%2285%22%2C%22textEndColumn%22%3A%22122%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"inline-flex items-center px-2 py-1 rounded bg-gray-50 border",children:"Dönüş"})]}),e.jsxs("div",{"trae-inspector-start-line":"87","trae-inspector-start-column":"10","trae-inspector-end-line":"87","trae-inspector-end-column":"77","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"mt-2 text-xs text-gray-500",children:["Durum: ",t.status]})]}),e.jsxs("div",{"trae-inspector-start-line":"89","trae-inspector-start-column":"8","trae-inspector-end-line":"99","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"shrink-0 flex items-center gap-2",children:[r&&e.jsxs(c,{variant:"outline",size:"sm",className:"text-red-600 border-red-200 hover:bg-red-50",onClick:()=>L(t.id),children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),"İptal"]}),e.jsx(x,{to:`/booking/${t.id}`,children:e.jsx(c,{size:"sm",variant:"outline",children:"Detay"})})]})]})})};return n.useEffect(()=>{try{localStorage.setItem("guestPhone",o)}catch{}},[o]),n.useEffect(()=>{try{localStorage.setItem("guestReservationCode",p)}catch{}},[p]),n.useEffect(()=>{try{const t=sessionStorage.getItem("guestOtpToken");if(!t)return;const r=JSON.parse(t);if(!(r!=null&&r.token)||!(r!=null&&r.exp))return;if(Date.now()>r.exp){sessionStorage.removeItem("guestOtpToken");return}A(r.token)}catch{}},[]),l?e.jsx("div",{"trae-inspector-start-line":"246","trae-inspector-start-column":"4","trae-inspector-end-line":"277","trae-inspector-end-column":"10","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{"trae-inspector-start-line":"247","trae-inspector-start-column":"6","trae-inspector-end-line":"276","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{"trae-inspector-start-line":"248","trae-inspector-start-column":"8","trae-inspector-end-line":"256","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{"trae-inspector-start-line":"249","trae-inspector-start-column":"10","trae-inspector-end-line":"252","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",children:[e.jsx("h1",{"trae-inspector-start-line":"250","trae-inspector-start-column":"12","trae-inspector-end-line":"250","trae-inspector-end-column":"80","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Rezervasyonlar%22%2C%22textStartLine%22%3A%22250%22%2C%22textStartColumn%22%3A%2261%22%2C%22textEndLine%22%3A%22250%22%2C%22textEndColumn%22%3A%2275%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-3xl font-bold text-gray-900",children:"Rezervasyonlar"}),e.jsx("p",{"trae-inspector-start-line":"251","trae-inspector-start-column":"12","trae-inspector-end-line":"251","trae-inspector-end-column":"94","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Planl%C4%B1%20yolculuklar%C4%B1n%C4%B1z%C4%B1%20buradan%20y%C3%B6netebilirsiniz.%22%2C%22textStartLine%22%3A%22251%22%2C%22textStartColumn%22%3A%2241%22%2C%22textEndLine%22%3A%22251%22%2C%22textEndColumn%22%3A%2290%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-gray-600",children:"Planlı yolculuklarınızı buradan yönetebilirsiniz."})]}),e.jsx(x,{to:"/reserve",children:e.jsx(c,{children:"Yeni Rezervasyon"})})]}),e.jsxs("div",{"trae-inspector-start-line":"258","trae-inspector-start-column":"8","trae-inspector-end-line":"275","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"space-y-8",children:[e.jsxs("section",{"trae-inspector-start-line":"259","trae-inspector-start-column":"10","trae-inspector-end-line":"266","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",children:[e.jsx("h2",{"trae-inspector-start-line":"260","trae-inspector-start-column":"12","trae-inspector-end-line":"260","trae-inspector-end-column":"82","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Yakla%C5%9Fan%22%2C%22textStartLine%22%3A%22260%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22260%22%2C%22textEndColumn%22%3A%2277%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-lg font-semibold text-gray-900 mb-3",children:"Yaklaşan"}),h&&e.jsx("div",{"trae-inspector-start-line":"261","trae-inspector-start-column":"24","trae-inspector-end-line":"261","trae-inspector-end-column":"82","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Y%C3%BCkleniyor...%22%2C%22textStartLine%22%3A%22261%22%2C%22textStartColumn%22%3A%2263%22%2C%22textEndLine%22%3A%22261%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-sm text-gray-500",children:"Yükleniyor..."}),!h&&z.length===0&&e.jsx("div",{"trae-inspector-start-line":"262","trae-inspector-start-column":"50","trae-inspector-end-line":"262","trae-inspector-end-column":"120","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Yakla%C5%9Fan%20rezervasyon%20yok.%22%2C%22textStartLine%22%3A%22262%22%2C%22textStartColumn%22%3A%2289%22%2C%22textEndLine%22%3A%22262%22%2C%22textEndColumn%22%3A%22114%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-sm text-gray-500",children:"Yaklaşan rezervasyon yok."}),e.jsx("div",{"trae-inspector-start-line":"263","trae-inspector-start-column":"12","trae-inspector-end-line":"265","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"space-y-3",children:z.map(t=>e.jsx(R,{b:t,canCancel:t.status==="pending"||t.status==="accepted"},t.id))})]}),e.jsxs("section",{"trae-inspector-start-line":"268","trae-inspector-start-column":"10","trae-inspector-end-line":"274","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",children:[e.jsx("h2",{"trae-inspector-start-line":"269","trae-inspector-start-column":"12","trae-inspector-end-line":"269","trae-inspector-end-column":"80","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Ge%C3%A7mi%C5%9F%22%2C%22textStartLine%22%3A%22269%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22269%22%2C%22textEndColumn%22%3A%2275%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-lg font-semibold text-gray-900 mb-3",children:"Geçmiş"}),!h&&S.length===0&&e.jsx("div",{"trae-inspector-start-line":"270","trae-inspector-start-column":"46","trae-inspector-end-line":"270","trae-inspector-end-column":"114","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Ge%C3%A7mi%C5%9F%20rezervasyon%20yok.%22%2C%22textStartLine%22%3A%22270%22%2C%22textStartColumn%22%3A%2285%22%2C%22textEndLine%22%3A%22270%22%2C%22textEndColumn%22%3A%22108%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-sm text-gray-500",children:"Geçmiş rezervasyon yok."}),e.jsx("div",{"trae-inspector-start-line":"271","trae-inspector-start-column":"12","trae-inspector-end-line":"273","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"space-y-3",children:S.map(t=>e.jsx(R,{b:t,canCancel:!1},t.id))})]})]})]})}):e.jsx("div",{"trae-inspector-start-line":"125","trae-inspector-start-column":"6","trae-inspector-end-line":"241","trae-inspector-end-column":"12","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{"trae-inspector-start-line":"126","trae-inspector-start-column":"8","trae-inspector-end-line":"240","trae-inspector-end-column":"14","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"max-w-4xl mx-auto px-4",children:e.jsxs("div",{"trae-inspector-start-line":"127","trae-inspector-start-column":"10","trae-inspector-end-line":"239","trae-inspector-end-column":"16","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h1",{"trae-inspector-start-line":"128","trae-inspector-start-column":"12","trae-inspector-end-line":"128","trae-inspector-end-column":"85","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Rezervasyonlar%22%2C%22textStartLine%22%3A%22128%22%2C%22textStartColumn%22%3A%2266%22%2C%22textEndLine%22%3A%22128%22%2C%22textEndColumn%22%3A%2280%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-2xl font-bold text-gray-900 mb-2",children:"Rezervasyonlar"}),e.jsx("p",{"trae-inspector-start-line":"129","trae-inspector-start-column":"12","trae-inspector-end-line":"129","trae-inspector-end-column":"108","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Telefon%20do%C4%9Frulamas%C4%B1%20ile%20rezervasyonunuzu%20g%C3%B6r%C3%BCnt%C3%BCleyebilirsiniz.%22%2C%22textStartLine%22%3A%22129%22%2C%22textStartColumn%22%3A%2241%22%2C%22textEndLine%22%3A%22129%22%2C%22textEndColumn%22%3A%22104%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-gray-600",children:"Telefon doğrulaması ile rezervasyonunuzu görüntüleyebilirsiniz."}),e.jsxs("div",{"trae-inspector-start-line":"131","trae-inspector-start-column":"12","trae-inspector-end-line":"134","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(C,{value:o,onChange:t=>D(t.target.value),placeholder:"+90 5xx xxx xx xx",label:"Telefon"}),e.jsx(C,{value:p,onChange:t=>b(t.target.value.toUpperCase()),placeholder:"Rezervasyon Kodu",label:"Rezervasyon Kodu"})]}),e.jsxs("div",{"trae-inspector-start-line":"136","trae-inspector-start-column":"12","trae-inspector-end-line":"196","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"mt-4 flex flex-col sm:flex-row gap-2",children:[e.jsx(c,{variant:"outline",onClick:async()=>{try{const t=await fetch(`${d}/otp/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:o})}),r=await t.json();if(!t.ok||!r.success){const s=r==null?void 0:r.error;if(s==="trial_verified_only"||s==="recipient_not_verified"){a.error("Twilio deneme hesabında sadece doğrulanmış numaralara SMS gider.");return}if(s==="geo_permission"){a.error("SMS gönderimi için ülke izni kapalı görünüyor.");return}throw new Error(s||"otp_send_failed")}E(!0),a.success("SMS kodu gönderildi")}catch{a.error("SMS gönderilemedi")}},disabled:!o||o.trim().length<7,children:"SMS Kod Gönder"}),e.jsx(C,{value:F,onChange:t=>N(t.target.value),placeholder:"SMS Kodu",label:"SMS Kodu"}),e.jsx(c,{onClick:async()=>{var t;try{const r=await fetch(`${d}/otp/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:o,code:F})}),s=await r.json();if(!r.ok||!s.success){const u=s==null?void 0:s.error;if(u==="invalid_code"){a.error("SMS kodu hatalı");return}if(u==="trial_verified_only"||u==="recipient_not_verified"){a.error("Twilio deneme hesabında sadece doğrulanmış numaralara SMS gider.");return}throw new Error(u||"otp_verify_failed")}const f=(t=s==null?void 0:s.data)==null?void 0:t.guestToken;A(f);try{sessionStorage.setItem("guestOtpToken",JSON.stringify({token:f,exp:Date.now()+20*6e4}))}catch{}const B=await fetch(`${d}/bookings/lookup`,{method:"POST",headers:{"Content-Type":"application/json","X-Guest-Token":f},body:JSON.stringify({phone:o,reservationCode:p})}),y=await B.json();if(!B.ok||!y.success)throw new Error(y.error||"booking_lookup_failed");w(y.data),a.success("Rezervasyon bulundu")}catch{a.error("Doğrulama veya rezervasyon bulma başarısız")}},disabled:!T||!F||!p,children:"Rezervasyonu Görüntüle"})]}),j&&!i&&e.jsx("div",{"trae-inspector-start-line":"199","trae-inspector-start-column":"14","trae-inspector-end-line":"217","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"mt-4",children:e.jsx(c,{variant:"outline",onClick:async()=>{try{const t=await fetch(`${d}/bookings/lookup`,{method:"POST",headers:{"Content-Type":"application/json","X-Guest-Token":j},body:JSON.stringify({phone:o,reservationCode:p})}),r=await t.json();if(!t.ok||!r.success)throw new Error(r.error||"booking_lookup_failed");w(r.data),a.success("Rezervasyon bulundu")}catch{a.error("Rezervasyon bulunamadı")}},disabled:!o||!p,children:"Tekrar SMS Girmeden Sorgula"})}),i&&e.jsxs("div",{"trae-inspector-start-line":"221","trae-inspector-start-column":"14","trae-inspector-end-line":"229","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"mt-6 bg-gray-50 border rounded-lg p-4",children:[e.jsx("div",{"trae-inspector-start-line":"222","trae-inspector-start-column":"16","trae-inspector-end-line":"222","trae-inspector-end-column":"86","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Rezervasyon%22%2C%22textStartLine%22%3A%22222%22%2C%22textStartColumn%22%3A%2269%22%2C%22textEndLine%22%3A%22222%22%2C%22textEndColumn%22%3A%2280%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-sm font-semibold text-gray-900",children:"Rezervasyon"}),e.jsx("div",{"trae-inspector-start-line":"223","trae-inspector-start-column":"16","trae-inspector-end-line":"223","trae-inspector-end-column":"103","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-sm text-gray-700 mt-1",children:i.pickupLocation.address}),e.jsxs("div",{"trae-inspector-start-line":"224","trae-inspector-start-column":"16","trae-inspector-end-line":"224","trae-inspector-end-column":"101","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-sm text-gray-600",children:["→ ",i.dropoffLocation.address]}),e.jsxs("div",{"trae-inspector-start-line":"225","trae-inspector-start-column":"16","trae-inspector-end-line":"227","trae-inspector-end-column":"22","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-xs text-gray-500 mt-2",children:[new Date(i.pickupTime).toLocaleString("tr-TR")," • ",i.vehicleType," • ",i.passengerCount," kişi"]}),e.jsxs("div",{"trae-inspector-start-line":"228","trae-inspector-start-column":"16","trae-inspector-end-line":"228","trae-inspector-end-column":"108","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-xs text-gray-500 mt-1",children:["Kod: ",i.reservationCode||"-"]})]}),e.jsxs("div",{"trae-inspector-start-line":"232","trae-inspector-start-column":"12","trae-inspector-end-line":"238","trae-inspector-end-column":"18","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"mt-6 border-t pt-4",children:[e.jsx("p",{"trae-inspector-start-line":"233","trae-inspector-start-column":"14","trae-inspector-end-line":"233","trae-inspector-end-column":"116","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%C4%B0sterseniz%20i%C5%9Flemlerinizi%20kaydetmek%20i%C3%A7in%20giri%C5%9F%20yapabilirsiniz.%22%2C%22textStartLine%22%3A%22233%22%2C%22textStartColumn%22%3A%2251%22%2C%22textEndLine%22%3A%22233%22%2C%22textEndColumn%22%3A%22112%22%2C%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"text-sm text-gray-600",children:"İsterseniz işlemlerinizi kaydetmek için giriş yapabilirsiniz."}),e.jsxs("div",{"trae-inspector-start-line":"234","trae-inspector-start-column":"14","trae-inspector-end-line":"237","trae-inspector-end-column":"20","trae-inspector-file-path":"src/pages/Reservations.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Fz%2Fmy-project%2Fgettransfer%22%7D",className:"mt-3 flex gap-2",children:[e.jsx(x,{to:"/login",children:e.jsx(c,{variant:"outline",children:"Giriş Yap"})}),e.jsx(x,{to:"/reserve",children:e.jsx(c,{children:"Yeni Rezervasyon"})})]})]})]})})})};export{J as Reservations};
